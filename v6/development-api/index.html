<hr>
<h2 id="layout-docsgroup-docs-v6order-701title-开发文档short-title-7-开发文档sidebar-docs-v6-toc-disqus-path"><a href="#layout-docsgroup-docs-v6order-701title-开发文档short-title-7-开发文档sidebar-docs-v6-toc-disqus-path" class="headerlink" title="layout: docsgroup: docs-v6order: 701title: 开发文档short_title: 7. 开发文档sidebar: [docs-v6, toc]disqus:  path: &#x2F;"></a>layout: docs<br>group: docs-v6<br>order: 701<br>title: 开发文档<br>short_title: 7. 开发文档<br>sidebar: [docs-v6, toc]<br>disqus:<br>  path: &#x2F;</h2><p>
{% span logo center large, <sup>&ensp;</sup>Volantis<sup>6</sup> %}
{% span center small logo, Development API for Volantis %}
</p>
<br>

<h2 id="样式文件说明"><a href="#样式文件说明" class="headerlink" title="样式文件说明"></a>样式文件说明</h2><p><a href="https://github.com/volantis-x/hexo-theme-volantis/blob/dev/source/css/Readme.md"><code>/source/css/Readme.md</code></a></p>
<h2 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h2><h3 id="volantis"><a href="#volantis" class="headerlink" title="volantis"></a>volantis</h3><p>我们提供了全局变量 volantis 和一些全局函数等主题开发调用接口。</p>
<p>源码参考：<a href="https://github.com/volantis-x/hexo-theme-volantis/blob/dev/layout/_partial/scripts/global.ejs"><code>layout/_partial/scripts/global.ejs</code></a></p>
<h3 id="VolantisApp"><a href="#VolantisApp" class="headerlink" title="VolantisApp"></a>VolantisApp</h3><p>我们提供了全局变量 VolantisApp 和一些全局函数等主题开发调用接口。</p>
<p>源码参考：<a href="https://github.com/volantis-x/hexo-theme-volantis/blob/8cc1f93a992ef378bc5f30a0528d28d35a804379/source/js/app.js#L44"><code>/source/js/app.js</code></a></p>
<h2 id="Pjax"><a href="#Pjax" class="headerlink" title="Pjax"></a>Pjax</h2><h3 id="Pjax-重载区域划分接口"><a href="#Pjax-重载区域划分接口" class="headerlink" title="Pjax 重载区域划分接口"></a>Pjax 重载区域划分接口</h3><p>我们提供了可以实现Pjax重载区域灵活划分的开发接口。</p>
<p>源码参考：<a href="https://github.com/volantis-x/hexo-theme-volantis/blob/dev/layout/_plugins/pjax/index.ejs"><code>layout/_plugins/pjax/index.ejs</code></a></p>
<h4 id="标签"><a href="#标签" class="headerlink" title="&lt;pjax&gt;&lt;/pjax&gt; 标签"></a><code>&lt;pjax&gt;&lt;/pjax&gt;</code> 标签</h4><p>所有被 <code>&lt;pjax&gt;&lt;/pjax&gt;</code> 标签包裹的所有元素将被pjax重载。</p>
<p>请检查并确保 pjax 标签必须存在于所有页面 否则 pjax error.</p>
<pre><code class="html">&lt;pjax&gt;
    &lt;!--我是将被pjax重载的内容 begin--&gt;
    &lt;div&gt;
        &lt;div&gt;&lt;/div&gt;
        &lt;script&gt;&lt;/script&gt;
    &lt;/div&gt;
    &lt;!--我是将被pjax重载的内容 end--&gt;
&lt;/pjax&gt;
</code></pre>
<p>使用案例：<a href="https://github.com/volantis-x/hexo-theme-volantis/blob/5a001b1555dc67ab61b050cded35e3c3b95750dd/layout/_partial/scripts/index.ejs#L97-L102"><code>/layout/_partial/scripts/index.ejs</code></a></p>
<h4 id="script-data-pjax"><a href="#script-data-pjax" class="headerlink" title="script[data-pjax]"></a><code>script[data-pjax]</code></h4><p>所有含有 <code>data-pjax</code> 标记的 <code>script</code> 标签将被pjax重载。</p>
<pre><code class="html">&lt;script data-pjax&gt;我是将被pjax重载的内容&lt;/script&gt;
</code></pre>
<h4 id="pjax-reload-script"><a href="#pjax-reload-script" class="headerlink" title=".pjax-reload script"></a><code>.pjax-reload script</code></h4><p>所有在 <code>pjax-reload</code> Class元素内部的 <code>script</code> 标签将被pjax重载。</p>
<pre><code class="html">&lt;div class=&quot;pjax-reload&quot;&gt;
    &lt;div&gt;
        &lt;div&gt;我不是将被pjax重载的内容&lt;/div&gt;
        &lt;script&gt;我是将被pjax重载的内容&lt;/script&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<h3 id="Pjax-回调方法"><a href="#Pjax-回调方法" class="headerlink" title="Pjax 回调方法"></a>Pjax 回调方法</h3><p>我们提供了灵活的 Pjax 回调方法。</p>
<p>源码参考：</p>
<p><a href="https://github.com/volantis-x/hexo-theme-volantis/blob/dev/layout/_partial/scripts/global.ejs"><code>layout/_partial/scripts/global.ejs</code></a></p>
<p><a href="https://github.com/volantis-x/hexo-theme-volantis/blob/dev/layout/_plugins/pjax/index.ejs"><code>layout/_plugins/pjax/index.ejs</code></a></p>
<p>使用案例：<a href="https://github.com/volantis-x/hexo-theme-volantis/blob/dev/layout/_plugins/pjax/animate.ejs#L27-L29"><code>layout/_plugins/pjax/animate.ejs</code></a></p>
<p>{% note info, 中括号[]里面的内容表示选项是可选的，可以不填。下同，不再赘述。 %}</p>
<h4 id="volantis-pjax-push-在Pjax请求完成后触发。"><a href="#volantis-pjax-push-在Pjax请求完成后触发。" class="headerlink" title="volantis.pjax.push 在Pjax请求完成后触发。"></a><code>volantis.pjax.push</code> 在Pjax请求完成后触发。</h4><p>使用 <code>volantis.pjax.push(callBack[,&quot;callBackName&quot;])</code> 传入<code>pjax:complete</code>回调函数。</p>
<p><code>callBack</code>是回调函数,必填。</p>
<p><code>&quot;callBackName&quot;</code> <code>string</code>类型 默认值是回调函数的函数名，选填。</p>
<h4 id="volantis-pjax-send-在Pjax请求开始后触发。"><a href="#volantis-pjax-send-在Pjax请求开始后触发。" class="headerlink" title="volantis.pjax.send 在Pjax请求开始后触发。"></a><code>volantis.pjax.send</code> 在Pjax请求开始后触发。</h4><p>使用 <code>volantis.pjax.send(callBack[,&quot;callBackName&quot;])</code> 传入<code>pjax:send</code>回调函数。</p>
<p><code>callBack</code>是回调函数,必填。</p>
<p><code>&quot;callBackName&quot;</code> <code>string</code>类型 默认值是回调函数的函数名，选填。</p>
<h4 id="volantis-pjax-error-在Pjax请求失败后触发。"><a href="#volantis-pjax-error-在Pjax请求失败后触发。" class="headerlink" title="volantis.pjax.error 在Pjax请求失败后触发。"></a><code>volantis.pjax.error</code> 在Pjax请求失败后触发。</h4><p>使用 <code>volantis.pjax.error(callBack[,&quot;callBackName&quot;])</code> 传入<code>pjax:error</code>回调函数。</p>
<p><code>callBack</code>是回调函数,必填。</p>
<p><code>&quot;callBackName&quot;</code> <code>string</code>类型 默认值是回调函数的函数名，选填。</p>
<h2 id="暗黑模式"><a href="#暗黑模式" class="headerlink" title="暗黑模式"></a>暗黑模式</h2><p>我们提供了暗黑模式灵活的开发接口。</p>
<p>源码参考：</p>
<p><a href="https://github.com/volantis-x/hexo-theme-volantis/blob/dev/layout/_partial/scripts/global.ejs"><code>layout/_partial/scripts/global.ejs</code></a></p>
<p><a href="https://github.com/volantis-x/hexo-theme-volantis/blob/dev/layout/_plugins/darkmode/script.ejs"><code>layout/_plugins/darkmode/script.ejs</code></a></p>
<h3 id="暗黑模式样式"><a href="#暗黑模式样式" class="headerlink" title="暗黑模式样式"></a>暗黑模式样式</h3><p>详见：<a href="https://github.com/volantis-x/hexo-theme-volantis/blob/dev/source/css/Readme.md"><code>/source/css/Readme.md</code></a></p>
<h3 id="当前模式"><a href="#当前模式" class="headerlink" title="当前模式"></a>当前模式</h3><p>调用 <code>volantis.dark.mode</code> 查看当前模式。返回值为字符串 <code>dark</code> 或者 <code>light</code>。</p>
<h3 id="暗黑模式触发器"><a href="#暗黑模式触发器" class="headerlink" title="暗黑模式触发器"></a>暗黑模式触发器</h3><p>调用 <code>volantis.dark.toggle()</code> 触发切换亮黑模式。</p>
<h3 id="暗黑模式触发器回调函数"><a href="#暗黑模式触发器回调函数" class="headerlink" title="暗黑模式触发器回调函数"></a>暗黑模式触发器回调函数</h3><p>调用 volantis.dark.push(callBack[,”callBackName”]) 传入触发器回调函数.</p>
<p>使用案例：<a href="https://github.com/volantis-x/hexo-theme-volantis/blob/dev/layout/_plugins/comments/utterances/script.ejs#L41"><code>layout/_plugins/comments/utterances/script.ejs</code></a></p>
<h2 id="Message-消息提示"><a href="#Message-消息提示" class="headerlink" title="Message 消息提示"></a>Message 消息提示</h2><p>我们在 <a href="https://izitoast.marcelodolza.com/">iziToast</a> 的基础上封装了一个简单的消息提示：</p>
<p>源码参考：</p>
<p>源码参考：<a href="https://github.com/volantis-x/hexo-theme-volantis/blob/8cc1f93a992ef378bc5f30a0528d28d35a804379/source/js/app.js#L511"><code>/source/js/app.js</code></a></p>
<pre><code class="js">VolantisApp.message(title, message, option, done);
VolantisApp.question(title, message, option, success, cancel, done);
</code></pre>
<ul>
<li><code>title</code>：标题（必填），字符串（String）</li>
<li><code>message</code>：内容（必填），字符串（String）</li>
<li><code>option</code>：配置项，对象(Object)</li>
<li><code>done</code>：完成时回调，函数(Function)</li>
<li><code>success</code>：确认时回调，函数(Function)</li>
<li><code>cancel</code>: 取消时回调，函数(Function)</li>
</ul>
<p><code>option</code> 可选参数：</p>
<ul>
<li><code>icon</code>,                 &#x2F;&#x2F; Fontawesome 图标</li>
<li><code>time</code>,                 &#x2F;&#x2F; 持续时间</li>
<li><code>position</code>,             &#x2F;&#x2F; 弹出位置</li>
<li><code>transitionIn</code>,         &#x2F;&#x2F; 弹窗打开动画</li>
<li><code>transitionOut</code>,        &#x2F;&#x2F; 弹窗关闭动画</li>
<li><code>messageColor</code>,         &#x2F;&#x2F; 消息颜色</li>
<li><code>titleColor</code>,           &#x2F;&#x2F; 标题颜色</li>
<li><code>backgroundColor</code>,      &#x2F;&#x2F; 默认背景色</li>
<li><code>zindex</code>                &#x2F;&#x2F; 层级</li>
</ul>
<p>option 配置优先级大于配置文件设置值。</p>
<p>使用范例：</p>
<pre><code class="js">// 同样弹窗
VolantisApp.message(&#39;这里是标题&#39;, &#39;这里是弹窗内容&#39;);

// 居中弹窗
VolantisApp.message(&#39;系统提示&#39;, &#39;这里是 Volantis 主题站，欢迎访问。&#39;, {
  icon: &#39;fad fa-smile-wink light-blue&#39;, 
  position: &#39;topCenter&#39;, 
  transitionIn:&#39;bounceInDown&#39;,
  transitionOut: &#39;fadeOutDown&#39;,
  time: 10000
});

// 询问弹窗
VolantisApp.question(&#39;问卷调查&#39;, &#39;你是否喜欢 Volantis 主题&#39;, {}, () =&gt; {
  alert(&#39;谢谢支持&#39;)
}, () =&gt; {
  console.log(&#39;再接再厉&#39;)
});
</code></pre>
<p>如果以上两个接口仍然不能满足您的需求，可以参考 <a href="https://izitoast.marcelodolza.com/">iziToast</a> 的内容直接调用 <code>iziToast</code> </p>
<h2 id="动态加载脚本"><a href="#动态加载脚本" class="headerlink" title="动态加载脚本"></a>动态加载脚本</h2><p>源码参考：</p>
<p><a href="https://github.com/volantis-x/hexo-theme-volantis/blob/dev/layout/_partial/scripts/global.ejs"><code>layout/_partial/scripts/global.ejs</code></a></p>
<pre><code class="js">  volantis.js(&quot;src&quot;, cb)
  volantis.css(&quot;src&quot;)
</code></pre>
<p><code>src</code> String类型 加载脚本URL</p>
<p><code>cb</code> 可选 可以传入onload回调函数 或者 JSON对象 例如: <code>volantis.js(&quot;src&quot;, ()=&gt;{})</code> 或 <code>volantis.js(&quot;src&quot;, {defer:true,onload:()=&gt;{}})</code></p>
<p>返回 Promise 对象</p>
<p>如下方法同步加载资源，这利于处理文件资源之间的依赖关系，例如：APlayer 需要在 MetingJS 之前加载</p>
<pre><code class="js">   (async () =&gt; {
       await volantis.js(&quot;...theme.plugins.aplayer.js.aplayer...&quot;)
       await volantis.js(&quot;...theme.plugins.aplayer.js.meting...&quot;)
   })();
</code></pre>
<p>使用案例：<a href="https://github.com/volantis-x/hexo-theme-volantis/blob/d71e7d533a8a3f13694f1adbb11417d02ac4ca04/layout/_plugins/aplayer/script.ejs#L7-L16"><code>layout/_plugins/aplayer/script.ejs</code></a></p>
<p>由于返回的是 Promise 对象，也可以采用以下方式实现加载完成后调用回调函数：</p>
<pre><code class="js">   volantis.js(&quot;https://cdn.jsdelivr.net/npm/jquery&quot;).then(()=&gt;{
       console.log(&quot;我在脚本加载完成后调用&quot;)
   })
</code></pre>
<h2 id="按需加载的插件"><a href="#按需加载的插件" class="headerlink" title="按需加载的插件"></a>按需加载的插件</h2><p>源码参考：</p>
<p><a href="https://github.com/volantis-x/hexo-theme-volantis/blob/dev/layout/_partial/scripts/global.ejs"><code>layout/_partial/scripts/global.ejs</code></a></p>
<h3 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h3><pre><code class="js">volantis.import.jQuery().then(()=&gt;{
  // 依赖 jQuery 的代码段
  // .....
  // .....
})
</code></pre>
<h2 id="requestAnimationFrame"><a href="#requestAnimationFrame" class="headerlink" title="requestAnimationFrame"></a>requestAnimationFrame</h2><p>1、requestAnimationFrame 会把每一帧中的所有 DOM 操作集中起来，在一次重绘或回流中就完成，并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率，一般来说，这个频率为每秒60帧。</p>
<p>2、在隐藏或不可见的元素中，requestAnimationFrame 将不会进行重绘或回流，这当然就意味着更少的的 cpu，gpu 和内存使用量。</p>
<pre><code class="js">volantis.requestAnimationFrame(() =&gt; {
  // 包含 DOM 操作的代码段
  // .........
  // .........
})
</code></pre>
<h2 id="Layout-Helper"><a href="#Layout-Helper" class="headerlink" title="Layout Helper"></a>Layout Helper</h2><p>向目标元素动态注入 HTML</p>
<pre><code class="js">volantis.layoutHelper(helper, html, opt)
</code></pre>
<ul>
<li><code>helper</code>：Helper id（必填），字符串（String）</li>
<li><code>html</code>：HTML（必填），字符串（String）</li>
<li><code>opt</code>：配置项，对象(Object)</li>
</ul>
<p><code>opt</code> 可选参数：</p>
<ul>
<li><code>clean</code>,  &#x2F;&#x2F; 清除 Layout Helper 原有的所有内容, 默认 false</li>
<li><code>pjax</code>,   &#x2F;&#x2F; 支持 pjax, 默认 true</li>
</ul>
<p><code>helper</code> 可选参数：</p>
<ul>
<li><code>page-plugins</code>,  &#x2F;&#x2F; 页面插件 Layout, 位于 layout&#x2F;_partial&#x2F;article.ejs</li>
<li><code>comments</code>,      &#x2F;&#x2F; 评论 Layout, 位于 layout&#x2F;_plugins&#x2F;comments&#x2F;index.ejs</li>
</ul>
<pre><code class="js">// 向 page-plugins 入口动态注入 id 为 artitalk_main 的 div, 不启用 pjax, 不清除 Layout Helper 原有的内容
volantis.layoutHelper(&quot;page-plugins&quot;,`&lt;div id=&quot;artitalk_main&quot;&gt;&lt;/div&gt;`, { pjax:false, clean:false })
</code></pre>
<h2 id="滚动事件处理"><a href="#滚动事件处理" class="headerlink" title="滚动事件处理"></a>滚动事件处理</h2><p>源码参考：<code>layout/_partial/scripts/global.ejs</code></p>
<h3 id="获取滚动条距离顶部的距离"><a href="#获取滚动条距离顶部的距离" class="headerlink" title="获取滚动条距离顶部的距离"></a>获取滚动条距离顶部的距离</h3><pre><code class="js">volantis.scroll.getScrollTop()
</code></pre>
<h3 id="获取滚动方向"><a href="#获取滚动方向" class="headerlink" title="获取滚动方向"></a>获取滚动方向</h3><pre><code class="js">volantis.scroll.del
</code></pre>
<p><code>volantis.scroll.del</code> 中存储了一个数值, 该数值检测一定时间间隔内滚动条滚动的位移, 数值的检测频率是浏览器的刷新频率.</p>
<ul>
<li>数值为正数时, 表示向下滚动.</li>
<li>数值为负数时, 表示向上滚动.</li>
</ul>
<h3 id="滚动事件回调函数"><a href="#滚动事件回调函数" class="headerlink" title="滚动事件回调函数"></a>滚动事件回调函数</h3><p>使用 <code>volantis.scroll.push(callBack[,&quot;callBackName&quot;])</code> 传入滚动事件回调函数, 当页面滚动时触发回调函数。</p>
<pre><code class="js">volantis.scroll.push(()=&gt;{
  if (volantis.scroll.del &gt; 0) {
    console.log(&quot;向下滚动&quot;);
  } else {
    console.log(&quot;向上滚动&quot;);
  }
})
</code></pre>
<p>使用 <code>volantis.scroll.unengine.push(callBack[,&quot;callBackName&quot;])</code> 传入非滚动事件回调函数, 当页面没有滚动时触发回调函数。</p>
<p>使用 <code>volantis.scroll.unengine.remove(&quot;callBackName&quot;)</code> 移除名称为 “callBackName” 的非滚动事件回调函数。</p>
<h3 id="触发页面滚动至目标元素位置"><a href="#触发页面滚动至目标元素位置" class="headerlink" title="触发页面滚动至目标元素位置"></a>触发页面滚动至目标元素位置</h3><pre><code class="js">// 滚动到目标 Dom 元素 &quot;ele&quot; 位置
volantis.scroll.to(ele, option)
</code></pre>
<p><code>ele</code>：Dom 元素（必填）</p>
<p><code>option</code> 可选参数：</p>
<ul>
<li><code>top</code>,                     &#x2F;&#x2F; 类型 Float,文档中的纵轴坐标, 默认值 <code>ele.getBoundingClientRect().top + document.documentElement.scrollTop</code></li>
<li><code>addTop</code>,                  &#x2F;&#x2F; 类型 Float,向上面的 top 参数中 添加补偿值.</li>
<li><code>behavior</code>,                &#x2F;&#x2F; 类型 String, 表示滚动行为, 支持参数 smooth (平滑滚动), instant (瞬间滚动)</li>
<li><code>observer</code>,                &#x2F;&#x2F; 类型 Boolean, 是否启用监视器,默认值 false, 监视器用于监视元素是否滚动到指定位置 目前用于处理 toc 部分 lazyload 引起的 cls 导致的定位失败问题.</li>
<li><code>observerDic</code>,             &#x2F;&#x2F; 类型 Float, 监视器监视距离, 默认值 25.</li>
</ul>
<p>例如:</p>
<pre><code class="js">volantis.scroll.to(document.getElementById(&quot;locationID&quot;),{addTop: - volantis.dom.header.offsetHeight - 10, behavior: &#39;instant&#39;})
</code></pre>
<h2 id="对本地文件使用CDN"><a href="#对本地文件使用CDN" class="headerlink" title="对本地文件使用CDN"></a>对本地文件使用CDN</h2><p>源码参考：</p>
<p><code>/scripts/events/lib/cdn.js</code></p>
<p>生成的CDN链接可使用 <code>theme.cdn.[keyword]</code> 回调。</p>
<h2 id="Custom-Files-自定义文件"><a href="#Custom-Files-自定义文件" class="headerlink" title="Custom Files 自定义文件"></a>Custom Files 自定义文件</h2><p>在不修改主题原始源代码的情况下添加自定义内容</p>
<h3 id="注入点"><a href="#注入点" class="headerlink" title="注入点"></a>注入点</h3><p>我们提供了一些注入点接口:</p>
<pre><code class="js">let points={
  styles:[
    &quot;first&quot;,
    &quot;style&quot;,
    &quot;dark&quot;,
    &quot;darkVar&quot;,
  ],
  views:[
    &quot;headBegin&quot;,
    &quot;headEnd&quot;,
    &quot;header&quot;,
    &quot;side&quot;,
    &quot;topMeta&quot;,
    &quot;bottomMeta&quot;,
    &quot;footer&quot;,
    &quot;postEnd&quot;,
    &quot;bodyBegin&quot;,
    &quot;bodyEnd&quot;,
  ]
}
</code></pre>
<h4 id="样式注入点"><a href="#样式注入点" class="headerlink" title="样式注入点"></a>样式注入点</h4><ul>
<li><p>first: 向 <code>theme/source/css/first.styl</code> 文件末尾注入自定义内容, 该文件中包含首屏样式,首屏样式采用硬编码的方式写在HTML中。首屏样式内含 cover navbar search 的样式.</p>
</li>
<li><p>style: 向 <code>theme/source/css/style.styl</code> 文件末尾注入自定义内容, 该文件中包含异步延迟加载的样式,除首屏样式,其他样式放入此处异步加载.</p>
</li>
<li><p>dark: 向 <code>theme/source/css/_style/_plugins/_dark/dark_plugins.styl</code> 文件末尾注入自定义内容, 该文件中包含异步暗黑模式样式 的 强制覆盖样式.</p>
</li>
<li><p>darkVar: 向 <code>theme/source/css/_style/_plugins/_dark/dark_async.styl</code> 调用函数 <code>async_dark()</code> 末尾注入自定义内容, 该文件中包含异步暗黑模式样式 的 暗黑模式 CSS 变量.</p>
</li>
</ul>
<h4 id="布局视图注入点"><a href="#布局视图注入点" class="headerlink" title="布局视图注入点"></a>布局视图注入点</h4><ul>
<li><p>headBegin: 向 <code>theme/layout/_partial/head.ejs</code> 文件 <code>&lt;head&gt;</code> 标签开头注入自定义内容.</p>
</li>
<li><p>headEnd: 向 <code>theme/layout/_partial/head.ejs</code> 文件 <code>&lt;head&gt;</code> 标签末尾注入自定义内容.</p>
</li>
<li><p>header: 向 <code>theme/layout/_partial/header.ejs</code> 文件 导航栏 <code>.nav-main</code> 末尾注入自定义内容.</p>
</li>
<li><p>side: 向 <code>theme/layout/_partial/side.ejs</code> 文件 侧边栏 <code>#l_side</code> 末尾注入自定义内容.</p>
</li>
<li><p>topMeta: 向 <code>theme/layout/_partial/meta.ejs</code> 文件 topMetas 末尾注入自定义内容.</p>
</li>
<li><p>bottomMeta: 向 <code>theme/layout/_partial/meta.ejs</code> 文件 bottomMetas 末尾注入自定义内容.</p>
</li>
<li><p>footer: 向 <code>theme/layout/_partial/footer.ejs</code> 文件 <code>&lt;footer&gt;</code> 标签末尾注入自定义内容.</p>
</li>
<li><p>postEnd: 向 <code>theme/layout/_partial/article.ejs</code> 文件 <code>&lt;article&gt;</code> 标签末尾注入自定义内容.</p>
</li>
<li><p>bodyBegin:  向 <code>theme/layout/layout.ejs</code> 文件 <code>&lt;body&gt;</code> 标签开头注入自定义内容.</p>
</li>
<li><p>bodyEnd:  向 <code>theme/layout/layout.ejs</code> 文件 <code>&lt;body&gt;</code> 标签末尾注入自定义内容.</p>
</li>
</ul>
<h3 id="blog-source-volantis-文件夹"><a href="#blog-source-volantis-文件夹" class="headerlink" title="blog&#x2F;source&#x2F;_volantis&#x2F; 文件夹"></a>blog&#x2F;source&#x2F;_volantis&#x2F; 文件夹</h3><p>一般的, 创建 <code>blog/source/_volantis/</code> 文件夹并在此文件夹下创建与注入点同名同扩展名的文件,用以写入注入点自定义内容.</p>
<pre><code class="js">  blog/source/_volantis/
    ├─ first.styl
    ├─ style.styl
    ├─ dark.styl
    ├─ darkVar.styl
    ├─ headBegin.ejs
    ├─ headEnd.ejs
    ├─ header.ejs
    ├─ topMeta.ejs
    ├─ bottomMeta.ejs
    ├─ postEnd.ejs
    ├─ bodyBegin.ejs
    └─ bodyEnd.ejs
</code></pre>
<p>当然,你仍然可以修改主题配置文件将自定义布局或样式放置在特定位置.以下是默认配置,该配置已隐藏.</p>
<pre><code class="yml">custom_files:
  first: source/_volantis/first.styl
  style: source/_volantis/style.styl
  dark: source/_volantis/dark.styl
  darkVar: source/_volantis/darkVar.styl
  headBegin: source/_volantis/headBegin.ejs
  headEnd: source/_volantis/headEnd.ejs
  header: source/_volantis/header.ejs
  topMeta: source/_volantis/topMeta.ejs
  bottomMeta: source/_volantis/bottomMeta.ejs
  postEnd: source/_volantis/postEnd.ejs
  bodyBegin: source/_volantis/bodyBegin.ejs
  bodyEnd: source/_volantis/bodyEnd.ejs
</code></pre>
<p>示例:</p>
<pre><code class="yml">body
  --color-site-body: blue !important
</code></pre>
<h3 id="theme-inject-过滤器"><a href="#theme-inject-过滤器" class="headerlink" title="theme_inject 过滤器"></a><code>theme_inject</code> 过滤器</h3><p>使用 Hexo 过滤器 <code>theme_inject</code> ，可以将所需的自定义内容添加到任何注入点。</p>
<p>{% note info, 如果您的代码很简单，建议您编写脚本，您只需要把 JavaScript 文件放到 scripts 文件夹，在启动时就会自动载入。您可以直接在 blog<br>文件夹下创建 scripts 文件夹. %}</p>
<pre><code class="js">hexo.extend.filter.register(&#39;theme_inject&#39;, function(injects) {
  // ...
});
</code></pre>
<p>对于注入布局视图:</p>
<pre><code class="js">// The name of same `injectPoint` suggest be unique. If same, it will override low priority configurations.
// `locals` and `options` is the same as partial https://hexo.io/docs/helpers#partial.
// `order` defines the order of injection, which by default depends on the priority of injection.
hexo.extend.filter.register(&#39;theme_inject&#39;, function(injects) {
  // it will put code from this filePath into injectPoint.
  injects.[injectPoint].file(name, filePath, [locals, options, order]);
  // it will put raw string as code into injectPoint.
  injects.[injectPoint].raw(name, raw, [locals, options, order]);
});
</code></pre>
<p>对于注入样式:</p>
<pre><code class="js">hexo.extend.filter.register(&#39;theme_inject&#39;, function(injects) {
  // it will put styleFile into injectPoint.
  injects.[injectPoint].push(styleFile);
});
</code></pre>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><p>以文件的形式向 <code>theme/css/style.styl</code> 文件末尾注入自定义样式</p>
<pre><code class="js">hexo.extend.filter.register(&#39;theme_inject&#39;, function(injects) {
  injects.style.push(&#39;source/_data/mystyle.styl&#39;);
});
</code></pre>
<p>以文本的形式向 <code>&lt;body&gt;</code> 标签末尾注入自定义脚本内容</p>
<pre><code class="js">hexo.extend.filter.register(&#39;theme_inject&#39;, function(injects) {
  injects.bodyEnd.raw(&#39;load-custom-js&#39;, &#39;&lt;script src=&quot;js-path-or-cdn.js&quot;&gt;&lt;/script&gt;&#39;);
});
</code></pre>
<p>以文件的形式向侧栏注入自定义布局视图内容</p>
<pre><code class="js">hexo.extend.filter.register(&#39;theme_inject&#39;, function(injects) {
  injects.side.file(&#39;my-favourite-food&#39;, &#39;source/_data/my-favourite-food.ejs&#39;);
});
</code></pre>
<h3 id="插件系统"><a href="#插件系统" class="headerlink" title="插件系统"></a>插件系统</h3><p>我们还支持 hexo 的插件系统，无需修改核心模块的源代码即可轻松扩展功能。你可以参考 <a href="https://hexo.io/docs/plugins.html#Plugin">https://hexo.io/docs/plugins.html#Plugin</a> 学习如何创建插件。</p>
<p>{% note warning up, 请注意，以上是主题开发文档，不是使用文档！ %}</p>
